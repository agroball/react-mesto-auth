{"version":3,"sources":["images/logo.a307e1c4.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Login.js","components/Register.js","images/Close_Icon.svg","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","utils/auth.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/InfoToolTip.js","images/registration-ok.svg","images/login-fail.svg","components/Footer.js","components/App.js","index.js"],"names":["Header","loggedIn","email","handleSignOut","pathname","useLocation","text","linkRoute","className","src","headerLogo","alt","to","onClick","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","useState","card","likes","some","i","_id","liked","setLiked","isOwn","owner","cardDeleteButtonClassName","cardLikeButtonClassName","link","name","onCardClick","onCardLike","type","length","onCardDelete","Main","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","Login","authorization","valueEmail","setValueEmail","valuePassword","setValuePassword","onSubmit","e","preventDefault","value","placeholder","onChange","target","Register","registration","PopupWithForm","isOpen","container","closeBtn","onClose","noValidate","title","children","button","ImagePopup","api","options","this","headers","baseUrl","fetch","then","_checkResult","method","newName","newAbout","body","JSON","stringify","data","cardId","res","ok","json","Promise","reject","status","isLiked","addLike","removeLike","BASE_URL","getContent","token","EditProfilePopup","setName","description","setDescription","useEffect","onUpdateUser","id","minLength","maxLength","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","setLink","ProtectedRoute","Component","component","InfoTooltip","message","iconPath","Footer","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","selectedCard","setSelectedCard","isPopupWithImageOpen","setIsPopupWithImageOpen","setCards","setCurrentUser","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setLoggedIn","setMessage","setEmail","history","useHistory","handleInfoTooltipPopupOpen","handleInfoTooltipContent","closeAllPopups","jwt","localStorage","getItem","Auth","push","catch","err","console","log","promises","getUserInfo","getInitialCards","all","user","error","Provider","removeItem","exact","path","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","password","Error","setItem","RegOk","setTimeout","RegNoOK","setUserInfo","result","updateAvatarImage","addCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e79e8696.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.a307e1c4.a307e1c4.svg\";","import { Link, useLocation } from \"react-router-dom\";\nimport headerLogo from \"../images/logo.a307e1c4.svg\";\n\nfunction Header({loggedIn, email, handleSignOut}){\n    const { pathname } = useLocation();\n    const text = `${pathname === '/sign-in' ? 'Регистрация' : 'Войти'}`;\n    const linkRoute = `${pathname === '/sign-in' ? '/sign-up' : '/sign-in'}`;\n\n    return (\n        <header className=\"header\">\n            <img src={headerLogo} alt=\"Главный логотип\" className=\"header__logo\" />\n            <div className=\"header__wrap\">\n                {loggedIn ? (\n                    <>\n                        <p className=\"header__email\">{email}</p>\n                        <Link className=\"header__signout\" to=\"\" onClick={handleSignOut}>Выйти</Link>\n                    </>) : (<Link to={linkRoute} className=\"header__link\">{text}</Link>)\n                }\n            </div>\n        </header>\n    )\n}\nexport default Header;\n","import React from 'react';\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n    const [liked, setLiked] = React.useState(\n        props.card.likes.some((i) => i._id === currentUser._id)\n    );\n    const isOwn = props.card.owner._id === currentUser._id;\n\n    function handleClick() {\n        props.onCardClick(props.card);\n    }\n\n    function handleLikeClick() {\n        setLiked(!liked);\n        props.onCardLike(props.card);\n    }\n\n    const cardDeleteButtonClassName = (`element__trash ${isOwn ? '' : 'element__trash_hidden'}`);\n    const cardLikeButtonClassName = (`element__like ${liked && 'element__like_active'}`);\n\n    function handleDeleteClick() {\n        props.onCardDelete(props.card);\n    }\n\n    return (\n     <div className=\"element\">\n         <img className=\"element__link\" src={props.card.link} alt={props.card.name} onClick={handleClick}/>\n         <div className=\"element__header\">\n             <h2 className=\"element__text\">{props.card.name}</h2>\n             <button className={cardLikeButtonClassName} onClick={handleLikeClick} type=\"button\"/>\n             <span className=\"element__number\">{props.card.likes.length}</span>\n             <button className={cardDeleteButtonClassName} onClick={handleDeleteClick} type=\"button\"/>\n         </div>\n     </div>\n ) \n}\n\nexport default Card;","import React from 'react';\nimport Card from './Card.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n\n\n\n    return ( <div className=\"main\" >\n        <section className=\"profile\" >\n        <div className=\"profile__header\" >\n        <div className=\"profile__avatar-container\" >\n        <img className=\"profile__avatar\"\n             src={currentUser.avatar}\n             alt=\"Фото аватара\"\n        />\n        <button className=\"profile__avatar-button\" onClick={props.onEditAvatar}/>\n        </div>\n            <div className=\"profile__info\" >\n        <div className=\"profile__line\" >\n        <h1 className=\"profile__title\" > {currentUser.name} </h1>\n            <button className=\"profile__editbutton\"\n        type=\"button\"\n        onClick={props.onEditProfile}\n        />\n        </div>\n                <p className=\"profile__paragraph\" > {currentUser.about} </p>\n            </div>\n        </div>\n            <button className=\"profile__addbutton\"\n        type=\"button\"\n        onClick={props.onAddPlace}\n        />\n        </section>\n\n            <section className=\"elements\" >\n                {props.cards.map((card) => (\n                <Card\n                    key={card._id}\n                    link={card.link}\n                    name={card.name}\n                    likes={card.likes}\n                    onCardClick={props.onCardClick}\n                    card={card}\n                    onCardLike={props.onCardLike}\n                    onCardDelete={props.onCardDelete}\n                />\n            ))}\n\n    </section>\n    </div>\n    );\n}\n\nexport default Main;","import React from 'react';\n\nfunction Login({authorization}) {\n    const [valueEmail, setValueEmail] = React.useState('');\n    const [valuePassword, setValuePassword] = React.useState('');\n\n    function handleChangeEmail(e) {\n        setValueEmail(e.target.value);\n    }\n\n    function handleChangePassword(e) {\n        setValuePassword(e.target.value);\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        const email = valueEmail;\n        const password = valuePassword;\n        authorization(email,password);\n    }\n\n    return (\n        <section className=\"start-screen\">\n            <h1 className=\"start-screen__title\">Вход</h1>\n            <form onSubmit={handleSubmit} className=\"start-screen__form\">\n                <input value={valueEmail} type=\"email\" className=\"start-screen__input\" placeholder=\"Email\" onChange={handleChangeEmail}/>\n                <input value={valuePassword} type=\"password\" className=\"start-screen__input\" placeholder=\"Пароль\" onChange={handleChangePassword}/>\n                <button className=\"start-screen__submit\">Войти</button>\n            </form>\n        </section>\n    );\n}\n\nexport default Login;","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register({registration}) {\n    const [valueEmail, setValueEmail] = React.useState('');\n    const [valuePassword, setValuePassword] = React.useState('');\n\n    function handleChangeEmail(e) {\n        setValueEmail(e.target.value);\n    }\n\n    function handleChangePassword(e) {\n        setValuePassword(e.target.value);\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        const email = valueEmail;\n        const password = valuePassword;\n        registration(email, password)\n    }\n\n    return (\n        <section className=\"start-screen\">\n            <h1 className=\"start-screen__title\">Регистрация</h1>\n            <form onSubmit={handleSubmit} className=\"start-screen__form\">\n                <input value={valueEmail} type=\"email\" className=\"start-screen__input\" placeholder=\"Email\" onChange={handleChangeEmail}/>\n                <input value={valuePassword} type=\"password\" className=\"start-screen__input\" placeholder=\"Пароль\" onChange={handleChangePassword}/>\n                <button className=\"start-screen__submit\">Зарегистрироваться</button>\n            </form>\n            <Link className=\"start-screen__login\" to=\"/sign-in\">Уже зарегистрированы? Войти</Link>\n        </section>\n    );\n}\n\nexport default Register;","export default __webpack_public_path__ + \"static/media/Close_Icon.118074ba.svg\";","import React from \"react\";\nimport closeBtn from '../images/Close_Icon.svg';\n\nfunction PopupWithForm(props) {\n\nreturn (\n\n    <div className={`popup popup_type_${props.name} ${props.isOpen && 'popup_opened'}`} >\n        <div className={`popup__container ${props.container}`}>\n            <button  src={closeBtn}\n                     alt=\"Кнопка закрыть\"\n                     className=\"popup__close-button\"\n                     onClick={props.onClose}/>\n            <form  className=\"form\"\n                   name={props.name}\n                   onSubmit={props.onSubmit}\n                   noValidate>\n                <h2 className=\"form__header\">{props.title}</h2>\n                {props.children}\n                <button type=\"submit\" className=\"form__button\">{props.button}</button>\n            </form>\n        </div>\n    </div>\n\n);\n\n}\nexport default PopupWithForm;","import closeBtn from '../images/Close_Icon.svg';\nimport React from \"react\";\n\nfunction ImagePopup(props) {\n    return(\n        <div className={`popup popup-image ${props.isOpen && 'popup_opened'}`}>\n            <div className=\"popup__container-image\">\n                <button className=\"popup__close-button popup__close-button-image\"\n                        type=\"button\"\n                        src={closeBtn}\n                        alt=\"Кнопка закрыть\"\n                        onClick={props.onClose}\n                />\n                <img className=\"popup__image\" src={`${props.card.link}`}  alt={props.card.name}/>\n                <h3 className=\"popup__title\">{props.card.name}</h3>\n            </div>\n        </div>\n    )\n}\n\nexport default ImagePopup;","export class Api {\n    constructor(options) {\n        this.headers = options.headers;\n        this.baseUrl = options.baseUrl;\n    }\n\n\n    getInitialCards() {\n        return fetch(`${this.baseUrl}/cards`, {\n                headers: this.headers\n            })\n            .then(this._checkResult)\n    }\n\n    getUserInfo() {\n        return fetch(`${this.baseUrl}/users/me`, {\n                method: 'GET',\n                headers: this.headers\n            })\n            .then(this._checkResult)\n\n    }\n\n    setUserInfo(newName, newAbout) {\n        return fetch(`${this.baseUrl}/users/me`, {\n                method: \"PATCH\",\n                headers: this.headers,\n                body: JSON.stringify({\n                    name: newName,\n                    about: newAbout\n                })\n            })\n            .then(this._checkResult)\n\n    }\n\n    updateAvatarImage(data) {\n        return fetch(`${this.baseUrl}/users/me/avatar`, {\n                method: 'PATCH',\n                headers: this.headers,\n                body: JSON.stringify(data)\n            })\n            .then(this._checkResult)\n\n    }\n\n    addCard(name, link) {\n        return fetch(`${this.baseUrl}/cards`, {\n                method: 'POST',\n                headers: this.headers,\n                body: JSON.stringify({\n                    name: name,\n                    link: link\n                })\n\n            })\n            .then(this._checkResult)\n\n    }\n\n    deleteCard(cardId) {\n        return fetch(`${this.baseUrl}/cards/${cardId}`, {\n                method: 'DELETE',\n                headers: this.headers,\n\n            })\n            .then(this._checkResult)\n\n    }\n\n    addLike(cardId) {\n        return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\n                method: 'PUT',\n                headers: this.headers,\n            })\n            .then(this._checkResult)\n\n    }\n    removeLike(cardId) {\n        return fetch(`${this.baseUrl}/cards/likes/${cardId}`, {\n                method: 'DELETE',\n                headers: this.headers,\n\n            })\n            .then(this._checkResult)\n\n    }\n\n    _checkResult(res) {\n        if (res.ok) {\n            return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n    };\n\n\n\n    changeLikeCardStatus(cardId, isLiked) {\n        if (isLiked) {\n            return this.addLike(cardId)\n        } else {\n            return this.removeLike(cardId)\n        }\n    };\n\n}\n\nconst api = new Api({\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-20',\n    headers: {\n        authorization: 'dc63b407-867c-4698-ab85-c3ed97052e84',\n        'Content-type': 'application/json'\n    }\n});\n\nexport default api;\n\n\n\n\n// fetch('https://mesto.nomoreparties.co/v1/cohort-20/cards', {\n//         headers: {\n//             authorization: 'dc63b407-867c-4698-ab85-c3ed97052e84'\n//         }\n//     })\n//     .then(res => res.json())\n//     .then((result) => {\n//         console.log(result);\n//     });","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const register = (email, password) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({email, password})\n    })\n};\n\nexport const authorize = (email, password) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password })\n    })\n        .then((res) => {\n            if (res.status === 400) {\n                throw new Error('Не все поля заполнены');\n            } else if (res.status === 401) {\n                throw new Error('Email не зарегистрирован');\n            } else return res.json();\n        })\n        .then((data) => {\n            console.log(data)\n            if (data.token) {\n                localStorage.setItem('jwt', data.token);\n                return data.token;\n            }\n        })\n}\n\nexport const getContent = (token) => {return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n    },\n})\n    .then((res) => {\n        return res.json()\n    })\n    .then((data) => data)\n}","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const [name, setName] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n\n\n    function handleNameChange(e) {\n        setName(e.target.value);\n    }\n    function handleAboutChange(e) {\n        setDescription(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        // Запрещаем браузеру переходить по адресу формы\n        e.preventDefault();\n        // Передаём значения управляемых компонентов во внешний обработчик\n        props.onUpdateUser({ name: name, about: description});\n    }\n\n    // После загрузки текущего пользователя из API\n// его данные будут использованы в управляемых компонентах.\n    React.useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n    }, [currentUser, props.isOpen]);\n\n\n    return (\n        <PopupWithForm\n            name=\"edit\"\n            title=\"Редактировать профиль\"\n            button=\"Сохранить\"\n            onSubmit={handleSubmit}\n            isOpen={props.isOpen}\n            onClose={props.onClose}\n        >\n            <input value={name} id=\"name\" name=\"name\" onChange={handleNameChange} type=\"text\" minLength=\"2\" maxLength=\"40\" className=\"form__name\" required/>\n            <span id=\"name-error\" className=\"error\"/>\n            <input value={description} id=\"job\" name=\"description\" onChange={handleAboutChange} type=\"text\" minLength=\"2\" maxLength=\"200\" className=\"form__name\" required/>\n            <span id=\"job-error\" className=\"error\"/>\n        </PopupWithForm>\n\n    );\n\n}\n\nexport default EditProfilePopup;","import PopupWithForm from \"./PopupWithForm.js\";\nimport React from \"react\";\n\nfunction EditAvatarPopup(props) {\n    const avatarRef = React.useRef();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.onUpdateAvatar({ avatar: avatarRef.current.value })\n    }\n\n    return(\n        <PopupWithForm name=\"avatarPopup\"\n                       title=\"Обновить аватар\"\n                       button=\"Сохранить\"\n                       isOpen={props.isOpen}\n                       onClose={props.onClose}\n                       onSubmit={handleSubmit}\n                       container=\"popup__container-avatar\"\n        >\n            <input id=\"avatar\" type=\"url\" className=\"form__name\" name=\"avatar__link\" placeholder=\"Ссылка на картинку\" ref={avatarRef} required/>\n            <span id=\"avatar-error\" className=\"error\"/>\n        </PopupWithForm>\n    )\n}\n\nexport default EditAvatarPopup;","import PopupWithForm from \"./PopupWithForm.js\";\nimport React from \"react\";\n\nfunction AddPlacePopup(props) {\n    const [name, setName] = React.useState(\"\");\n    const [link, setLink] = React.useState(\"\");\n\n    function handleNameChange(e) {\n        setName(e.target.value);\n    }\n    function handleLinkChange(e) {\n        setLink(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.onAddPlace({name: name, link: link});\n    }\n\n    return(\n    <PopupWithForm\n        name=\"add\"\n        title=\"Новое Место\"\n        button=\"Создать\"\n        onSubmit={handleSubmit}\n        isOpen={props.isOpen}\n        onClose={props.onClose}\n    >\n        <input id=\"title\" name=\"title__add\" type=\"text\" minLength=\"2\" maxLength=\"30\" className=\"form__name\" placeholder=\"Название\" onChange={handleNameChange} value={name} required/>\n        <span id=\"title-error\" className=\"error\"/>\n        <input id=\"link\" name=\"link__add\" type=\"url\" className=\"form__name\" placeholder=\"Ссылка на картинку\" onChange={handleLinkChange} value={link} required/>\n        <span id=\"link-error\" className=\"error\"/>\n    </PopupWithForm>\n)\n}\n\nexport default AddPlacePopup;","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n\n    return (\n        <Route>\n            <>\n                {\n                    props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\n                }\n            </>\n        </Route>\n    )}\n\nexport default ProtectedRoute;","import closeBtn from '../images/Close_Icon.svg';\nimport React from \"react\";\n\nfunction InfoTooltip ({onClose, isOpen, message}) {\n\n    return (\n        <div className={`popup ${isOpen ? 'popup_opened' : ''}`}>\n            <div className=\"popup__container popup__container_reg\">\n                <img src={message.iconPath} alt=\"\" className=\"popup__result-icon\"/>\n                <p className=\"popup__title-info\">{message.text}</p>\n                <button type=\"button\"\n                        src={closeBtn}\n                        alt=\"Кнопка закрыть\"\n                        className=\"popup__close-button\" onClick={onClose} />\n            </div>\n        </div>\n    );\n}\n\nexport default InfoTooltip ;","export default __webpack_public_path__ + \"static/media/registration-ok.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/login-fail.df8eddf6.svg\";","import React from 'react';\n\nfunction Footer() {\n    return(\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">© 2021 Тимаков Роман</p>\n        </footer>\n    )\n}\nexport default Footer;","import '../index.css';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Login from './Login.js';\nimport Register from './Register';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport api from '../utils/api.js';\nimport * as Auth from '../utils/auth';\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport InfoTooltip from \"./InfoToolTip\";\nimport React from \"react\";\nimport RegOk from '../images/registration-ok.svg';\nimport RegNoOK from '../images/login-fail.svg';\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Footer from \"./Footer\";\n\n\nfunction App() {\n\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [selectedCard, setSelectedCard] = React.useState({});\n    const [isPopupWithImageOpen, setIsPopupWithImageOpen] = React.useState(false);\n    const [cards, setCards] = React.useState([]);\n    const [currentUser, setCurrentUser] = React.useState({ name: '', about: ''});\n    const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [message, setMessage] = React.useState({ iconPath: '', text: '' });\n    const [email, setEmail] = React.useState('');\n    const history = useHistory();\n\n    React.useEffect(() => {\n        const jwt = localStorage.getItem('jwt');\n        if (jwt) {\n            Auth.getContent(jwt)\n                .then((res) => {\n                    setLoggedIn(true);\n                    setEmail(res.data.email);\n                    history.push('/');\n                })\n                .catch(err => console.log(err));\n        }\n    }, [history]);\n\n\n    React.useEffect(() => {\n        const promises = [api.getUserInfo(), api.getInitialCards()];\n        Promise.all(promises)\n            .then(([user, cards]) => {\n                console.log(user, cards)\n                setCurrentUser(user);\n                setCards(cards);\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    }, []);\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick(){\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleInfoTooltipPopupOpen() {\n        setIsInfoTooltipPopupOpen(true);\n    }\n    function handleInfoTooltipContent({iconPath, text}) {\n        setMessage({ iconPath: iconPath, text: text })\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card);\n        setIsPopupWithImageOpen(true);\n    }\n\n    function closeAllPopups() {\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setSelectedCard({});\n        setIsPopupWithImageOpen(false);\n        setIsInfoTooltipPopupOpen(false);\n    }\n\n    function handleLikeClick(card) {\n        const isLiked = card.likes.some((i) => i._id === currentUser._id);\n        // Отправляем запрос в API и получаем обновлённые данные карточки\n        api.changeLikeCardStatus(card._id, !isLiked)\n            .then((newCard) => {\n                // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n                const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n                // Обновляем стейт\n                setCards(newCards);\n            })\n            .catch((err) => console.log(err));\n    }\n\n    function handleDeleteClick(card){\n        api.deleteCard(card._id)\n            .then((newCard)=> {\n                const newCards = cards.filter((c) =>\n                    c._id === card._id ? \"\" : newCard\n                );\n                setCards(newCards);\n            })\n            .catch((err) => console.log(err));\n    }\n\n    function handleUpdateUser({name, about}) {\n        return api.setUserInfo(name, about)\n            .then((result) => {\n                setCurrentUser(result);\n                closeAllPopups();\n            })\n            .catch((err) => console.log(err));\n    }\n\n    function handleUpdateAvatar(data) {\n        api.updateAvatarImage(data)\n            .then((result) => {\n                setCurrentUser(result);\n                closeAllPopups();\n            })\n            .catch((err) => console.log(err));\n    }\n\n    function handleAddPlaceSubmit({name, link}) {\n        api.addCard(name, link)\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                closeAllPopups();\n            })\n            .catch((err) => console.log(err));\n    }\n\n    // Регистрация\n    function registration(email, password) {\n        Auth.register(email, password).then((res) => {\n            if(res.status === 201){\n                handleInfoTooltipContent({iconPath: RegOk, text: 'Вы успешно зарегистрировались!'})\n                handleInfoTooltipPopupOpen();\n                // Перенаправляем на страницу логина спустя 3сек и закрываем попап\n                setTimeout(history.push, 3000, \"/sign-in\");\n                setTimeout(closeAllPopups, 2500);\n            }\n            if(res.status === 400) {\n                console.log('Введный емейл ужезарегестрирован')\n            }\n        }).catch((err)=> {\n            handleInfoTooltipContent({iconPath: RegNoOK, text: 'Что-то пошло не так! Попробуйте ещё раз.'})\n            handleInfoTooltipPopupOpen();\n            setTimeout(closeAllPopups, 2500);\n            console.log(err)\n        })\n    }\n\n    // Авторизация\n    function authorization(email, password) {\n        Auth.authorize(email, password )\n            .then((data) => {\n                if (!data) {\n                    throw new Error('Произошла ошибка');\n                }\n                Auth.getContent(data)\n                    .then((res) => {\n                        setEmail(res.data.email);\n                    }).catch(err => console.log(err));\n                setLoggedIn(true);\n                handleInfoTooltipContent({iconPath: RegOk, text: 'Вы успешно авторизовались!'})\n                handleInfoTooltipPopupOpen();\n                // Перенаправляем на главную страницу спустя 3сек и закрываем попап\n                setTimeout(history.push, 3000, \"/\");\n                setTimeout(closeAllPopups, 2500);\n            }).catch((err) => {\n            handleInfoTooltipContent({iconPath: RegNoOK, text: 'Что то пошло не так! Попробуйте еще раз!'})\n            handleInfoTooltipPopupOpen();\n            console.log(err)\n        })\n    }\n\n    // Выход из учетки\n    function handleSignOut() {\n        setLoggedIn(false);\n        localStorage.removeItem('jwt');\n        setEmail('');\n        history.push('/sign-in');\n    }\n\n    return (\n<>\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header loggedIn={loggedIn} email={email} handleSignOut={handleSignOut}/>\n        <Switch>\n            {currentUser && <ProtectedRoute\n                exact path=\"/\"\n                loggedIn={loggedIn}\n                component={Main}\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                cards={cards}\n                onCardLike={handleLikeClick}\n                onCardDelete={handleDeleteClick}\n            />}\n            <Route path=\"/sign-in\">\n                <Login\n                    authorization={authorization}\n                />\n            </Route>\n            <Route path=\"/sign-up\">\n                <Register\n                    registration={registration}\n                />\n            </Route>\n            <Route path=\"/\">\n                {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n            </Route>\n        </Switch>\n        {loggedIn && <Footer />}\n        <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n        />\n        <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n        />\n        <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n        />\n\n          <PopupWithForm name=\"agreePopup\"\n                         title=\"Вы уверены?\"\n                         button=\"Да\">\n          </PopupWithForm>\n\n\n          <ImagePopup\n              card={selectedCard}\n              isOpen={isPopupWithImageOpen}\n              onClose={closeAllPopups}\n          >\n          </ImagePopup>\n        {currentUser &&\n        <InfoTooltip\n            isOpen={isInfoTooltipPopupOpen}\n            onClose={closeAllPopups}\n            message={message}\n        />\n        }\n    </CurrentUserContext.Provider>\n</>\n  );\n}\n\nexport default App;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter} from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}